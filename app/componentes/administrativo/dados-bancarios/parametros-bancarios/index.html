<!-- 

    Atos Capital - www.atoscapital.com.br
   
    suporte@atoscapital.com.br
 
 
    Administrativo > Dados Bancários > Parâmetros Bancários



    Versão: 1.0.2 - 04/09/2015
    - Associação a uma filial
 
    Versão: 1.0.1 - 03/09/2015
    - Seleção Múltipla

    Versão 1.0 - 03/09/2015
-->

<div class="container" ng-controller="administrativo-parametros-bancariosCtrl" 
     ng-init="administrativo_parametrosBancariosInit()">    
    <!-- BEGIN PAGE BREADCRUMB -->
    <ul class="page-breadcrumb breadcrumb">
        <li>
            <a href="javascript:;" ng-click="goHome()">Início</a><i class="fa fa-circle"></i>
        </li>
        <li class="active">
             Administrativo<i class="fa fa-caret-right"></i>
             Gestão de Empresas<i class="fa fa-caret-right"></i>
             Parâmetros Bancários
        </li>
    </ul>
    <!-- END PAGE BREADCRUMB -->

    <!-- PORTLET FILTROS -->
    <div class="portlet light"> 
        <div class="portlet-title">
            <div class="caption">								
                <span class="caption-subject font-green-sharp bold uppercase">Filtros</span>						
            </div>
        </div>
        <!-- FILTROS -->
        <div class="portlet-body" ng-show="exibeTela">
            <div id="datatable_ajax_wrapper" class="dataTables_wrapper dataTables_extended_wrapper no-footer">
                <div class="row">
                    <div class="col-md-8 col-sm-12">
                        <div class="dataTables_paginate paging_bootstrap_extended" id="datatable_ajax_paginate">
                        </div>
                        <div class="dataTables_info" id="datatable_ajax_info" role="status" aria-live="polite">
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <div class="table-group-actions pull-right">
                        <span> </span>
                        </div>
                    </div>
                </div>
                
                <div class="table-scrollable">
                    <table class="table table-striped table-bordered table-hover dataTable no-footer conteudoTabelas" id="datatable_ajax" aria-describedby="datatable_ajax_info" role="grid">
                        <thead>
                            <tr role="row" class="heading">
                                <th tabindex="0" aria-controls="datatable_ajax" rowspan="1" colspan="1"  width="30%">
                                     Banco
                                </th>
                                <th tabindex="1" aria-controls="datatable_ajax" rowspan="1" colspan="1"  width="10%">
                                     Tipo 
                                </th>
                                <th tabindex="2" aria-controls="datatable_ajax" rowspan="1" colspan="1"  width="20%">
                                     Adquirente
                                </th>
                                <th tabindex="2" aria-controls="datatable_ajax" rowspan="1" colspan="1"  width="30%">
                                     Filial
                                </th>
                                <th tabindex="3" aria-controls="datatable_ajax" rowspan="1" colspan="1"  width="10%">
                                     Ações de Filtro
                                </th>                                
                            </tr>
                            <tr role="row" class="filter">  
                                <!-- BANCO -->
                                <td rowspan="1" colspan="1">
                                    <input type="text" class="form-control"
                                           id="buscabanco"
                                           ng-class="{'spinner' : buscandoBancos}"
                                           placeholder="Banco" 
                                           ng-model="filtro.banco"
                                           ng-blur="validaBanco()"
                                           onfocus="this.select();" 
                                           onmouseup="return false;"
                                           typeahead-on-select="selecionouBanco()"
                                           typeahead-focus-first=false
                                           typeahead-min-length='3'
                                           typeahead-wait-ms="500"
                                           typeahead="banco as exibeBanco(banco) for banco in buscaBancos($viewValue)" />                 
                                </td>
                                <!-- TIPO -->
                                <td rowspan="1" colspan="1">
                                    <select style="width: 100%;"
																						aria-controls="datatable_products"
                                            class="form-control input-sm input-inline"
                                            ng-model="filtro.tipo"
                                            ng-change="alterouDsTipo()"
                                            ng-options="dsTipo for dsTipo in dsTipos">
                                        <option value="">TODOS</option>
                                    </select>
                                </td>
                                <!-- ADQUIRENTE -->
                                <td rowspan="1" colspan="1">
                                    <div class="row">
																			<div class="col-md-12">
                                        <select style="width: 100%;"
																								aria-controls="datatable_products" 
                                                class="form-control input-sm input-inline"
                                                ng-model="filtro.adquirente"
                                                ng-disabled="filtro.semadquirentes"
                                                ng-change="alterouAdquirente()"
                                                ng-options="adquirente as (adquirente.dsAdquirente | uppercase) for adquirente in adquirentes"> 
                                            <option value="">TODAS</option>
                                        </select>
																			</div>
                                    </div>
                                    <div class="row" style="margin-top:10px;">
                                        <div class="col-sm-3 col-md-3" style="margin-right: -15px;">
                                            <checkbox normal ng-model="filtro.semadquirentes"
                                                      ng-change="selecionouCheckboxAdquirente()"></checkbox>
                                        </div>
                                        <div class="col-sm-9 col-md-9" style="text-align:left;">
                                            <label>Exibir somente os registros sem adquirente associada</label>
                                        </div>
                                    </div>
                                </td>
                                <!-- FILIAL -->
                                <td rowspan="1" colspan="1">
                                    <select class="form-control form-filter input-sm comboBoxFiltros"
                                            ng-disabled="filiais.length == 0"
                                            ng-model="filtro.filial"
                                            ng-change="alterouFilial()"
                                            ng-options="filial as getNomeAmigavelFilial(filial) for filial in filiais">
                                        <option style="display:none" value=""></option>
                                    </select>
                                    <i class="fa fa-question-circle"
                                        ng-show="!usuariologado.grupoempresa"
                                        popover-placement="bottom"
                                        popover="É necessário selecionar uma empresa"
                                        popover-trigger="mouseenter"></i> 
                                </td>
                                <!--AÇÕES-->
                                <td rowspan="1" colspan="1">
                                    <div class="margin-bottom-5">
                                        <button class="btn btn-sm red filter-submit margin-bottom"
                                                ng-click="buscaParametrosBancarios()">
                                            <i class="fa fa-search"></i>
                                            Buscar
                                        </button>
                                    </div>
                                    <button class="btn btn-sm grey filter-cancel"
                                            ng-click="resetaFiltros()">
                                        <i class="fa fa-times"></i>
                                        Limpar
                                    </button>
                                </td>
                            </tr>                   
                        </thead>
                    </table>
                </div>
                <div class="row">
                    <div class="col-md-8 col-sm-12">
                        <div class="dataTables_paginate paging_bootstrap_extended">
                        </div>
                        <div class="dataTables_info">
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- FIM PORTLET FILTROS -->
    
    <!-- PORTLET TABELA -->
    <div class="portlet light">
        
        <!-- MODAL PARÂMETRO BANCÁRIO -->
       <div class="modal fade bs-modal-sm modal-input" 
            id="modalParametroBancario" aria-hidden="true">
           <div class="modal-dialog modal-sm" style="width:600px">
               <div class="modal-content">
                   <div class="modal-header">
                       <h4 class="modal-title modal-cabecalho">{{modalParametro.titulo}}</h4>
                   </div>
                   <div class="modal-body modal-corpo modalAcessoDeUsuarios" style="text-align: left"> 
                       <div class="row">
                            <!-- BANCO -->
                            <div class="col-sm-12">
                                <div class="col-sm-2">
                                    <label>Banco</label>
                                </div>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control modalContasCorrentes"
                                           id="buscabancomodal"
                                           ng-disabled="!ehCadastro()"
                                           ng-class="{'spinner' : buscandoBancos}"
                                           placeholder="Banco" 
                                           ng-model="modalParametro.banco"
                                           ng-blur="validaBancoModal()"
                                           onfocus="this.select();" 
                                           onmouseup="return false;"
                                           typeahead-focus-first=false
                                           typeahead-min-length='3'
                                           typeahead-wait-ms="500"
                                           typeahead="banco as exibeBanco(banco) for banco in buscaBancos($viewValue)" />
                                </div>    
                           </div>
                           <!-- DESCRIÇÃO -->
                           <div class="col-sm-12">
                               <div class="col-sm-2">
                                    <label>Descrição</label>
                               </div>
                               <div class="col-sm-10">
                                    <input type="text" 
                                           ng-disabled="!ehCadastro()"
                                           class="form-control modalContasCorrentes" 
                                           placeholder="Descrição"
                                           ng-model="modalParametro.dsMemo"> 
                               </div>     
                           </div>
                           <!-- TIPO -->
                           <div class="col-sm-12">
                                <div class="col-sm-2">
                                    <label>Tipo</label>
                                </div>
                                <div class="col-sm-5">
                                    <select aria-controls="datatable_products" 
                                            class="form-control input-sm input-inline"
                                            ng-model="modalParametro.dsTipo"
                                            ng-options="dsTipo for dsTipo in dsTipos"> 
                                        <option style="display: none" value=""></option>  
                                    </select>
                                </div>     
                           </div>
                           <!-- ADQUIRENTE -->
                           <div class="col-sm-12">
                                <div class="col-sm-2">
                                    <label>Adquirente</label>
                                </div>
                                <div class="col-sm-10">
                                    <select aria-controls="datatable_products" 
                                            ng-disabled="adquirentes.length === 0"
                                            class="form-control input-sm input-inline"
                                            ng-model="modalParametro.adquirente"
                                            ng-options="adquirente as (adquirente.dsAdquirente | uppercase) for adquirente in adquirentes"> 
                                        <option value=""></option>  
                                    </select>
                               </div>
                           </div>
                           <!-- FILIAL -->
                           <div class="col-sm-12">
                                <div class="col-sm-2">
                                    <label>Filial</label>
                                </div>
                                <div class="col-sm-10">
                                    <select class="form-control input-sm input-inline"
                                            ng-disabled="filiais.length === 0"
                                            ng-model="modalParametro.filial"
                                            ng-options="filial as getNomeAmigavelFilial(filial) for filial in filiais">
                                        <option value=""></option>
                                    </select>
                                </div>
                           </div>
                       </div>
                   </div>
                   <div class="modal-footer">
                       <div class="col-sm-3 col-sm-offset-2">
                           <button type="button" class="btn default" data-dismiss="modal">
                               Cancelar
                           </button>
                       </div>                           
                       <div class="col-sm-4 col-sm-offset-1">
                           <button type="button" class="btn"
                                   ng-class="{'blue' : ehCadastro(), 'green' : !ehCadastro()}"
                                   ng-click="modalParametro.funcaoConfirma()">
                               {{modalParametro.textoConfirma}}
                           </button>                                
                       </div>
                   </div>
               </div>
           </div>
       </div>
       <!-- END MODAL PARÂMETRO BANCÁRIO -->
        
        <!-- MODAL SELECIONA ADQUIRENTE -->
       <div class="modal fade bs-modal-sm modal-input" 
            id="modalSelecionaAdquirente" aria-hidden="true">
           <div class="modal-dialog modal-sm" style="width:300px">
               <div class="modal-content">
                   <div class="modal-header">
                       <h4 class="modal-title modal-cabecalho">Associa Adquirente</h4>
                   </div>
                   <div class="modal-body modal-corpo modalAcessoDeUsuarios" style="text-align: left">
                       <div class="row">
                           <!-- ADQUIRENTE -->
                           <div class="col-sm-12 col-sm-offset-1">
                                <!-- ADQUIRENTE -->
                                <select aria-controls="datatable_products" style="width:80%"
                                        class="form-control input-sm input-inline"
                                        ng-model="modalSelecionaAdquirente.adquirente"
                                        ng-options="adquirente as (adquirente.dsAdquirente | uppercase) for adquirente in adquirentes"> 
                                    <option value=""></option>  
                                </select>
                           </div>
                       </div>
                   </div>
                   <div class="modal-footer">
                       <div class="col-sm-3 col-sm-offset-1">
                           <button type="button" class="btn default" data-dismiss="modal">
                               Cancelar
                           </button>
                       </div>                           
                       <div class="col-sm-4 col-sm-offset-2">
                           <button type="button" class="btn green"
                                   ng-click="associaAdquirenteParametrosSelecionados()">
                               Associa
                           </button>                                
                       </div>
                   </div>
               </div>
           </div>
       </div>
       <!-- END MODAL SELECIONA ADQUIRENTE -->
        
        <!-- MODAL SELECIONA FILIAL -->
       <div class="modal fade bs-modal-sm modal-input" 
            id="modalSelecionaFilial" aria-hidden="true">
           <div class="modal-dialog modal-sm" style="width:300px">
               <div class="modal-content">
                   <div class="modal-header">
                       <h4 class="modal-title modal-cabecalho">Associa Filial</h4>
                   </div>
                   <div class="modal-body modal-corpo modalAcessoDeUsuarios" style="text-align: left">
                       <div class="row">
                           <div class="col-sm-12 col-sm-offset-1">
                                <!-- FILIAL -->
                                <select class="form-control form-filter input-sm comboBoxFiltros"
                                        ng-disabled="filiais.length == 0"
                                        ng-model="modalSelecionaFilial.filial"
                                        ng-options="filial as getNomeAmigavelFilial(filial) for filial in filiais">
                                    <option value=""></option>
                                </select>
                           </div>
                       </div>
                   </div>
                   <div class="modal-footer">
                       <div class="col-sm-3 col-sm-offset-1">
                           <button type="button" class="btn default" data-dismiss="modal">
                               Cancelar
                           </button>
                       </div>                           
                       <div class="col-sm-4 col-sm-offset-2">
                           <button type="button" class="btn green"
                                   ng-click="associaFilialParametrosSelecionados()">
                               Associa
                           </button>                                
                       </div>
                   </div>
               </div>
           </div>
       </div>
       <!-- END MODAL SELECIONA FILIAL -->
        
        
        <div class="portlet-title">
            <div class="caption">								
                <span class="caption-subject font-green-sharp bold uppercase">PARÂMETROS BANCÁRIOS</span>
            </div>
            <div class="actions">
                <a class="btn btn-circle btn-icon-only btn-default fullscreen" 
                   href="javascript:;" 
                   ng-click="fullScreenClick()"
                   title="{{telaEstaEmFullScreen() ? 'Tela Normal' : 'Tela Cheia'}}"></a>
                <div class="btn-group element-hidden"> <!-- NÃO EXIBE PQ AINDA NÃO TEM WEBAPI -->
                    <a class="btn btn-default btn-circle" href="javascript:;" data-toggle="dropdown">
                    <i class="fa fa-share"></i> Opções <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="dropdown-menu pull-right">
                        <li>
                            <a href="javascript:;">
                            Export to Excel </a>
                        </li>
                        <li>
                            <a href="javascript:;">
                            Export to CSV </a>
                        </li>
                        <li>
                            <a href="javascript:;">
                            Export to XML </a>
                        </li>
                        <li class="divider">
                        </li>
                        <li>
                            <a href="javascript:;">
                            Print Invoices </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="portlet-body" ng-show="exibeTela">
            <!-- TOPO DA TABELA COM BOTÃO 'Novo Parâmetro' -->     
            <div class="table-toolbar">
                <div class="row">
                    <div class="col-md-5">
                        <div class="btn-group">
                            <a href="javascript:;" ng-click="novoParametroBancario()"
                               ng-class="{'element-hidden': !usuarioPodeCadastrarParametros()}">
                                <button class="btn red">
                                Novo Parâmetro <i class="fa fa-plus"></i>
                            </button></a>
                        </div>
                    </div>                            
                </div>
            </div>
            <div class="row paddingDivs">
                <!--EXIBIÇÃO-->
                <div class="col-xs-4 col-sm-4">
                    <div class="dataTables_length">
                        <label>
                            <span class="seperator"></span>Exibindo 
                            <select name="datatable_products_length" aria-controls="datatable_products" 
                                    class="form-control input-xsmall input-sm input-inline"
                                    ng-model="filtro.itens_pagina"
                                    ng-change="alterouItensPagina()"
                                    ng-options="item for item in itens_pagina">                                            
                            </select> registros de {{filtro.total_registros}}
                        </label>
                    </div>
                </div> 
                <!--PAGINAÇÃO-TOPO-->
                <div class="col-xs-4 col-sm-4 col-md-3">
                    <div class="pagination-panel centralizarPaginacao"> Página 
                        <a href="javascript:;" ng-click="retrocedePagina()"
                           class="btn btn-sm default prev" 
                           ng-class="{disabled: filtro.pagina <= 1}" 
                           title="Página anterior">
                                <i class="fa fa-angle-left"></i>
                        </a>
                        <input type="text" class="pagination-panel-input form-control input-mini input-inline input-sm" 
                               maxlength="4" style="text-align:center; margin: 0 5px;"
                               ng-model="paginaInformada" valid-integer-number
                               ng-keypress="($event.which === 13) ? alteraPagina() : 0"
                               ng-blur="atualizaPaginaDigitada()">
                            <a href="javascript:;" ng-click="avancaPagina()"
                               class="btn btn-sm default next"
                               ng-class="{disabled: filtro.pagina >= filtro.total_paginas}"
                               title="Próxima página">
                                <i class="fa fa-angle-right"></i>
                            </a>
                            de <span class="pagination-panel-total">{{filtro.total_paginas}}</span>
                    </div>
                </div>                            
                <!-- FIM PAGINAÇÃO -->
                <div class="col-xs-4 col-sm-4">
                    <!-- AÇÃO DE SELEÇÃO -->
                    <td class="center btnacoes">
                        <div class="btn-group" dropdown dropdown-append-to-body>
                            <a class="btn btn-default btn-circle" 
                               href="javascript:;" dropdown-toggle>
                                <i class="fa fa-pencil"></i>
                                 Selecionados
                                <i class="fa fa-angle-down"></i>
                            </a>
                            <ul class="dropdown-menu dropDownAtos">
                                <li ng-show="usuarioPodeAlterarParametros()">
                                    <a href="javascript:;" 
                                       ng-click="exibeModalSelecionaAdquirente()">
                                        Associar adquirente
                                    </a>
                                </li>
                                <li ng-show="usuarioPodeExcluirParametros()">
                                    <a href="javascript:;" 
                                       ng-click="excluirParametrosSelecionados()">
                                        Excluir
                                    </a>
                                </li> 
                                <li ng-show="usuarioPodeAlterarParametros()">
                                    <a href="javascript:;" 
                                       ng-click="ocultaParametrosSelecionados()">
                                        Ocultar
                                    </a>
                                </li> 
                            </ul>
                        </div>
                    </td> 
                </div>
            </div>
            
            <!-- CONTEÚDO DA TABELA -->
            <div class="table-scrollable">
                <table class="table table-striped table-hover table-bordered dataTable no-footer" role="grid">
                    <thead>
                        <tr role="row">
                            <th tabindex="0" rowspan="1" colspan="1" style="width: 5%;">
                                <checkbox normal ng-model="filtro.selecao"
                                          ng-change="alterouSelecaoParametros()"></checkbox>
                            </th>
                            <th tabindex="1" rowspan="1" colspan="1" style="width: 30%;">
                               Banco
                            </th>
                            <th tabindex="2" rowspan="1" colspan="1" style="width: 15%;">
                               Tipo 
                            </th>
                            <th tabindex="3" rowspan="1" colspan="1" style="width: 30%;">
                               Descrição
                            </th>
                            <th tabindex="4" rowspan="1" colspan="1" style="width: 10%;">
                               Adquirente
                            </th>
                            <th tabindex="5" rowspan="1" colspan="1" style="width: 10%;">
                               Ação
                            </th>                                        
                        </tr>
                    </thead>
                    <tbody>
                        <tr role="row" class="odd conteudoTabelas"
                            ng-repeat="parametro in parametros">
                            <!-- CHECKBOX -->
                            <td style="text-align:center">
                                <checkbox normal ng-model="parametro.selecionado"></checkbox>
                            </td>
                            <!--BANCO-->
                            <td style="text-align:left"
                                ng-bind="exibeBanco(parametro.banco)">
                            </td>
                            <!--TIPO-->
                            <td>
                                {{parametro.dsTipo | uppercase}}
                            </td>
                            <!--DESCRIÇÃO-->
                            <td>
                                {{parametro.dsMemo | uppercase}}
                            </td>
                            <!--ADQUIRENTE-->
                            <td>
                                {{(parametro.adquirente.dsAdquirente | uppercase) || ''}}
                            </td>
                            <!-- BOTÃO AÇÕES -->
                            <td class="center btnacoes">
                                <div class="btn-group" dropdown dropdown-append-to-body>
                                    <a class="btn btn-default btn-circle" 
                                       href="javascript:;" dropdown-toggle>
                                        <i class="fa fa-pencil"></i>
                                         Ações 
                                        <i class="fa fa-angle-down"></i>
                                    </a>
                                    <ul class="dropdown-menu dropDownAtos">
                                        <li ng-show="usuarioPodeAlterarParametros()">
                                            <a href="javascript:;" 
                                               ng-click="editarParametroBancario(parametro)">
                                                Editar
                                            </a>
                                        </li>
                                        <li ng-show="usuarioPodeExcluirParametros()">
                                            <a href="javascript:;" 
                                               ng-click="excluirParametroBancario(parametro)">
                                                Excluir
                                            </a>
                                        </li> 
                                        <li ng-show="usuarioPodeAlterarParametros()">
                                            <a href="javascript:;" 
                                               ng-click="ocultaParametroBancario(parametro)">
                                                Ocultar
                                            </a>
                                        </li> 
                                    </ul>
                                </div>
                            </td> 
                            <!--FIM BOTÃO AÇÕES-->                                                                   
                        </tr>                                                                
                    </tbody>
                </table>
            </div> 
            <!-- RODAPÉ : Exibição dos resultados e paginação -->
            <div class="row">
                <div class="col-xs-4 col-sm-4 col-md-4">
                    <div class="dataTables_info" role="status" aria-live="polite">
                        <strong>Exibindo os registros {{filtro.faixa_registros}}</strong>
                    </div>
                </div>
                <!--PAGINAÇÃO-RODAPÉ-->
                <div class="col-xs-4 col-sm-4 col-md-3">
                    <div class="pagination-panel centralizarPaginacao"> Página 
                        <a href="javascript:;" ng-click="retrocedePagina()"
                           class="btn btn-sm default prev" 
                           ng-class="{disabled: filtro.pagina <= 1}" 
                           title="Página anterior">
                                <i class="fa fa-angle-left"></i>
                        </a>
                        <input type="text" class="pagination-panel-input form-control input-mini input-inline input-sm" 
                               maxlength="4" style="text-align:center; margin: 0 5px;"
                               ng-model="paginaInformada" valid-integer-number
                               ng-keypress="($event.which === 13) ? alteraPagina() : 0"
                               ng-blur="atualizaPaginaDigitada()">
                            <a href="javascript:;" ng-click="avancaPagina()"
                               class="btn btn-sm default next"
                               ng-class="{disabled: filtro.pagina >= filtro.total_paginas}"
                               title="Próxima página">
                                <i class="fa fa-angle-right"></i>
                            </a>
                            de <span class="pagination-panel-total">{{filtro.total_paginas}}</span>
                    </div>
                </div>
                <!-- FIM PAGINAÇÃO -->
            </div>
            <!-- FIM RODAPÉ -->
        </div>
    </div>
</div>
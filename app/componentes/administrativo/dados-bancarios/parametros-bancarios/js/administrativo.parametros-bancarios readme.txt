# README #

Módulo que:
 - gerencia o layout da tela de parâmetros bancários de Gestão de Empresas (app/componentes/administracao/gestao-empresas/parametros-bancarios/index.html);
 - permite a visualização da relação entre os MEMOs de extrato bancário associado a cada banco, a fim de associar a alguma adquirente
 

### Pra Que Serve Este Módulo? ###

Gerenciar completamente a tela de parâmetros bancários de Gestão de Empresas (Administrativo). 



### O que é necessário para usar o módulo? ###

Como esse é um controller filho do controller principal "appCtrl" (app.js), ele herda todos os módulos importados por ele.
Além deles, é necessária a importação dos seguintes módulos externos.

 |----------------------------------------|---------------------------------------------------|-------------------------------------------|
 |                MODULO                  |                   DESCRIÇÃO                       |         IMPORT (no app/index.html)        |
 |----------------------------------------|---------------------------------------------------|-------------------------------------------|
 |                       
 |----------------------------------------|---------------------------------------------------|-------------------------------------------|


 
### Outras depêndencias ###

  * Evento "mudancaDeRota", proveniente do "appCtrl", para de fato modificar a rota/estado
  * $scope.token do "appCtrl"
  * Emite evento "acessouTela" no init do controller para que seja feito o log de acesso de tela
  * Evento "acessoDeTelaNotificado", proveniente do "appCtrl", para de fato exibir a tela e fazer requisições 
	=> importante para o log correto de requisições HTTP, ao qual identifica corretamente a (tela de) origem
  * $scope.grupoempresa, do "appCtrl" : grupo empresa informado pelo usuário na barra administrativa
  * Evento "alterouGrupoEmpresa", emitido pelo controller "appCtrl", para identificar a mudança do $scope.grupoempresa
  * APIS:
    - card/tbbancoparametro
	- card/tbadquirente
	- cliente/empresa
	- pos/loginoperadora
	- util/bancos
	
 
 
 ### Interação com a WEB API ###
 
  * util/bancos
	- GET : listagem dos bancos (coleção 0)
			[
			  { Codigo : string,
				NomeExtenso : string
			  }
			]
 
  * card/tbadquirente
    - GET : listagem as adquirentes que podem ser cadastradas (coleção 1)
			[
			  { cdAdquirente = int,
                nmAdquirente = string,
                dsAdquirente = string,
                stAdquirente = int,  // igual a 1
				hrExecucao = datetime,
			  }
			]	
			
  * cliente/empresa
	- GET : listagem das filiais (com respectivos estabelecimentos) (coleção 3)
			[
			  { nu_cnpj : string,
				ds_fantasia : string,
				filial : string,
				estabelecimentos : [{ estabelecimento : string, 
									  operadora : { id : int, 
													nmOperadora : string
												  }
									}]
			  }
			]
	
  * pos/loginoperadora   
	- GET : listagem dos dados de acesso (coleção 3) => envia estabelecimento como filtro
			[
			  { id : int,
				login : string,
				senha : string,
				status : boolean,
				operadora : { id : int,
							  desOperadora : string
							},
				empresa : { nu_cnpj : string,
							ds_fantasia : string,
							filial : string },
				grupoempresa : { id_grupo : int,
								 ds_nome : string},
				estabelecimento : string (ou null)
			  }
			]
	
  * card/tbbancoparametro
    - DELETE : exclui um parâmetro bancário
	        ?token=....&cdBanco=codigo&dsMemo=memo
    - GET : listagem dos parâmetros bancários (coleção 2)
			[
			  { dsMemo : string,
				adquirente : null ou { cdAdquirente : int, nmAdquirente : string, dsAdquirente : string, stAdquirente : int},
				dsTipo : string,
				flVisivel : bool,
				banco : { Codigo : string, 
						  NomeExtenso : string},
				empresa : null ou { nu_cnpj : string, ds_fantasia : string }
				grupoempresa : null ou { id_grupo : int, ds_nome : string }
			  }
			]	
	- PUT : altera parâmetro(s) bancário(s) existente
			[
			  cdAdquirente : int,
			  nrCnpj : string,
			  flVisivel : bool, // obrigatório!
			  deletar : bool, // obrigatório!
			  parametros : [{ cdBanco : string,
							  dsMemo : string,
							  dsTipo : string,
							}]
			]			
   

   
### Desenvolvedores ###

Deivid Marinho - deividgfmarinho@gmail.com